<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√†nh Tr√¨nh Tri·∫øt H·ªçc - Quiz Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/rpg-style.css">
</head>
<body>
    <!-- Video Background -->
    <video id="video-background" autoplay muted loop playsinline>
        <source src="intro_triet.mp4" type="video/mp4">
    </video>
    <div class="video-overlay"></div>

    <!-- Particle Canvas -->
    <canvas id="particle-canvas"></canvas>

        <!-- Sound Toggle -->
        <button id="sound-toggle" class="sound-toggle" aria-label="√Çm thanh">
            üîà
        </button>


    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-container">
            <div class="rpg-loader">
                <div class="spell-circle"></div>
                <h2 class="glowing-text">ƒêang kh·ªüi t·∫°o th·∫ø gi·ªõi...</h2>
                <div class="loading-bar-container">
                    <div class="loading-bar" id="loading-progress"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Intro Story Screen -->
    <div id="intro-screen" class="screen">
        <div class="story-container">
            <div class="story-content">
                <h1 class="story-title">H√ÄNH TR√åNH TRI·∫æT H·ªåC</h1>
                <div class="story-text">
                    <p class="typing-text">Trong m·ªôt th·∫ø gi·ªõi n∆°i tri th·ª©c l√† s·ª©c m·∫°nh, b·∫°n l√† m·ªôt h·ªçc gi·∫£ tr·∫ª ƒëang t√¨m ki·∫øm ch√¢n l√Ω, nh·ªØng tri th·ª©c m·ªõi ƒë·ªÉ m·ªü r·ªông t·∫ßm hi·ªÉu bi·∫øt c·ªßa m√¨nh...</p>
                    <p class="typing-text">Con ƒë∆∞·ªùng c·ªßa b·∫°n s·∫Ω ƒë·∫ßy th·ª≠ th√°ch v·ªõi 15 c√¢u h·ªèi v√† nh·ªØng th√°ch th·ª©c v·ªÅ ch·ªß nghƒ©a M√°c ‚Äì L√™nin.</p>
                    <p class="typing-text">M·ªói c√¢u tr·∫£ l·ªùi ƒë√∫ng s·∫Ω mang l·∫°i cho b·∫°n kinh nghi·ªám v√† s·ª©c m·∫°nh.</p>
                    <p class="typing-text">H√£y ch·ª©ng minh b·∫°n x·ª©ng ƒë√°ng v·ªõi danh hi·ªáu <strong>B·∫≠c Th·∫ßy Tri·∫øt H·ªçc</strong>!</p>
                </div>
                <!-- GIF Ch√∫c may m·∫Øn -->
                <div class="intro-gif-container">
                    <img src="/assets/images/intro.gif" 
                         alt="Ch√∫c may m·∫Øn" 
                         class="intro-gif" />
                    <p class="intro-luck-text">‚ú® Ch√∫c May M·∫Øn! ‚ú®</p>
                </div>
                <button id="start-journey-btn" class="btn btn-hero">B·∫Øt ƒê·∫ßu H√†nh Tr√¨nh</button>
                <button id="theme-selector-btn" class="btn btn-theme">üé® Ch·ªçn M√†u S·∫Øc</button>
                <button id="contribute-btn" class="btn btn-secondary" style="margin-top: 15px;">üìù ƒê√≥ng G√≥p C√¢u H·ªèi</button>
            </div>
        </div>
    </div>

    <!-- Theme Selector Modal -->
    <div id="theme-modal" class="theme-modal">
        <div class="theme-modal-content">
            <div class="theme-modal-header">
                <h2>Ch·ªçn M√†u S·∫Øc Game</h2>
                <button class="theme-close" id="close-theme-modal">√ó</button>
            </div>
            <div class="theme-grid">
                <div class="theme-option" data-theme="pink-blue">
                    <div class="theme-preview pink-blue-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #EC4899;"></span>
                            <span class="color-dot" style="background: #3B82F6;"></span>
                        </div>
                        <div class="theme-name">H·ªìng - Xanh</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="purple-gold">
                    <div class="theme-preview purple-gold-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #8B5CF6;"></span>
                            <span class="color-dot" style="background: #F59E0B;"></span>
                        </div>
                        <div class="theme-name">T√≠m - V√†ng</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="green-cyan">
                    <div class="theme-preview green-cyan-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #10B981;"></span>
                            <span class="color-dot" style="background: #06B6D4;"></span>
                        </div>
                        <div class="theme-name">Xanh L√° - Xanh D∆∞∆°ng</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="red-orange">
                    <div class="theme-preview red-orange-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #EF4444;"></span>
                            <span class="color-dot" style="background: #F97316;"></span>
                        </div>
                        <div class="theme-name">ƒê·ªè - Cam</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="blue-purple">
                    <div class="theme-preview blue-purple-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #3B82F6;"></span>
                            <span class="color-dot" style="background: #8B5CF6;"></span>
                        </div>
                        <div class="theme-name">Xanh - T√≠m</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="yellow-pink">
                    <div class="theme-preview yellow-pink-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #FBBF24;"></span>
                            <span class="color-dot" style="background: #EC4899;"></span>
                        </div>
                        <div class="theme-name">V√†ng - H·ªìng</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="professional-blue">
                    <div class="theme-preview professional-blue-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #2563EB;"></span>
                            <span class="color-dot" style="background: #3B82F6;"></span>
                        </div>
                        <div class="theme-name">Xanh Chuy√™n Nghi·ªáp</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="elegant-purple">
                    <div class="theme-preview elegant-purple-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #7C3AED;"></span>
                            <span class="color-dot" style="background: #8B5CF6;"></span>
                        </div>
                        <div class="theme-name">T√≠m Thanh L·ªãch</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="fresh-green">
                    <div class="theme-preview fresh-green-theme">
                        <div class="theme-colors">
                            <span class="color-dot" style="background: #059669;"></span>
                            <span class="color-dot" style="background: #10B981;"></span>
                        </div>
                        <div class="theme-name">Xanh T∆∞∆°i M·ªõi</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Character Creation Screen -->
    <div id="character-screen" class="screen">
        <div class="character-container">
            <h2 class="section-title">T·∫°o Nh√¢n V·∫≠t C·ªßa B·∫°n</h2>
            <div class="character-creation">
                <div class="character-visual">
                    <div class="character-avatar" id="character-preview">
                        <div class="avatar-circle">üßô‚Äç‚ôÇÔ∏è</div>
                    </div>
                    <div class="character-classes">
                        <button class="class-btn active" data-class="scholar" data-emoji="üßô‚Äç‚ôÇÔ∏è">
                            <span class="class-emoji">üßô‚Äç‚ôÇÔ∏è</span>
                            <span class="class-name">H·ªçc Gi·∫£</span>
                        </button>
                        <button class="class-btn" data-class="philosopher" data-emoji="üéì">
                            <span class="class-emoji">üéì</span>
                            <span class="class-name">Tri·∫øt Gia</span>
                        </button>
                        <button class="class-btn" data-class="warrior" data-emoji="‚öîÔ∏è">
                            <span class="class-emoji">‚öîÔ∏è</span>
                            <span class="class-name">Chi·∫øn Binh</span>
                        </button>
                        <button class="class-btn" data-class="sage" data-emoji="üîÆ">
                            <span class="class-emoji">üîÆ</span>
                            <span class="class-name">Hi·ªÅn Tri·∫øt</span>
                        </button>
                    </div>
                </div>
                <div class="character-form">
                <div class="form-group">
                        <label for="player-name">T√™n nh√¢n v·∫≠t:</label>
                        <input type="text" id="player-name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n..." maxlength="20" autocomplete="off">
                    </div>
                    <div class="character-stats-preview">
                        <div class="stat-item">
                            <span class="stat-label">S·ª©c M·∫°nh:</span>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Tr√≠ Tu·ªá:</span>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Kinh Nghi·ªám:</span>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 0%"></div>
                            </div>
                        </div>
                </div>
                    <button id="begin-game-btn" class="btn btn-hero">B·∫Øt ƒê·∫ßu Phi√™u L∆∞u</button>
                </div>
                </div>
        </div>
    </div>

    <!-- Game Combat Screen -->
    <div id="game-screen" class="screen">
        <div class="combat-container">
            <!-- Character HUD -->
            <div class="player-hud">
                <div class="hud-section">
                    <div class="character-info">
                        <span class="character-name" id="hud-name">H·ªçc Gi·∫£</span>
                        <span class="character-level">Level <span id="hud-level">1</span></span>
                        <span class="character-stage" id="hud-stage">T√¢n Th·ªß</span>
                    </div>
                    <div class="bars-with-gif-container">
                        <div class="bars-container">
                            <div class="health-bar-container">
                                <div class="bar-label">HP</div>
                                <div class="health-bar">
                                    <div class="health-fill" id="health-fill"></div>
                                </div>
                                <span class="bar-value" id="health-text">100/100</span>
                            </div>
                            <div class="exp-bar-container">
                                <div class="bar-label">EXP</div>
                                <div class="exp-bar">
                                    <div class="exp-fill" id="exp-fill"></div>
                                </div>
                                <span class="bar-value" id="exp-text">0/100</span>
                            </div>
                        </div>
                        <div class="bars-gif-wrapper">
                            <img src="/assets/images/phan2.gif" alt="Character GIF" class="bars-gif" />
                        </div>
                    </div>
                </div>
                <div class="hud-section">
                    <div class="stat-display">
                        <div class="stat-badge">
                            <span class="stat-icon">‚úì</span>
                            <span class="stat-value" id="correct-count">0</span>
                        </div>
                        <div class="stat-badge">
                            <span class="stat-icon">‚úó</span>
                            <span class="stat-value" id="wrong-count">0</span>
                        </div>
                        <div class="stat-badge">
                            <span class="stat-icon">‚≠ê</span>
                            <span class="stat-value" id="score-display">0</span>
                        </div>
                </div>
                </div>
            </div>
            
            <!-- Question Boss Display -->
            <div class="boss-container">
                <div class="boss-card" id="boss-card">
                    <div class="boss-header">
                        <h3 class="boss-name">Th·ª≠ Th√°ch Tri Th·ª©c</h3>
                        <span class="question-number" id="question-number">C√¢u 1/15</span>
                    </div>
                    <div class="boss-body">
                        <div class="timer-display" id="timer-display">
                            <div class="timer-circle">
                                <svg class="timer-svg" viewBox="0 0 100 100">
                                    <circle class="timer-bg" cx="50" cy="50" r="45"></circle>
                                    <circle class="timer-progress" id="timer-progress" cx="50" cy="50" r="45"></circle>
                                </svg>
                                <div class="timer-text" id="timer-text">30</div>
                            </div>
                        </div>
                        <div class="question-text-container">
                            <p class="question-text" id="question-text">C√¢u h·ªèi s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Answer Options -->
            <div class="answers-grid" id="answers-container">
                <button class="answer-card" data-answer="A">
                    <span class="answer-label">A</span>
                    <span class="answer-text" id="answer-a-text">ƒê√°p √°n A</span>
                </button>
                <button class="answer-card" data-answer="B">
                    <span class="answer-label">B</span>
                    <span class="answer-text" id="answer-b-text">ƒê√°p √°n B</span>
                </button>
                <button class="answer-card" data-answer="C">
                    <span class="answer-label">C</span>
                    <span class="answer-text" id="answer-c-text">ƒê√°p √°n C</span>
                </button>
                <button class="answer-card" data-answer="D">
                    <span class="answer-label">D</span>
                    <span class="answer-text" id="answer-d-text">ƒê√°p √°n D</span>
                </button>
                </div>

            <!-- Answer Result GIF -->
            <div id="answer-result-gif-container" class="answer-result-gif-container">
                <img id="answer-result-gif" src="" alt="Result" class="answer-result-gif" />
            </div>

            <!-- Combat Effects -->
            <div id="combat-effects"></div>
                </div>
            </div>
            
    <!-- Explanation Screen -->
    <div id="explanation-screen" class="screen">
        <div class="explanation-container">
            <div class="explanation-header">
                <h2 id="explanation-title">Gi·∫£i Th√≠ch</h2>
                <button id="close-explanation" class="btn btn-secondary">Ti·∫øp Theo</button>
            </div>
            <div class="explanation-content">
                <div id="explanation-media-container" class="explanation-gif-container">
                    <img src="/assets/images/question-explain.gif" alt="Explanation GIF" class="explanation-gif" />
                </div>
                <div class="explanation-text-container">
                    <h3 id="explanation-question">C√¢u h·ªèi</h3>
                    <p id="explanation-text">Gi·∫£i th√≠ch s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y...</p>
                    <div id="explanation-knowledge" class="knowledge-gain">
                        <div class="knowledge-icon">üìö</div>
                        <p>B·∫°n ƒë√£ n√¢ng c·∫•p tri th·ª©c c·ªßa m√¨nh!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Victory Screen -->
    <div id="victory-screen" class="screen">
        <div class="victory-container">
            <div class="victory-content">
                <div class="victory-animation">
                    <img src="/assets/images/end-game.gif" alt="Victory GIF" class="victory-gif" />
                    <div class="victory-icon">üìö</div>
                    <h1 class="victory-title">N√ÇNG C·∫§P TRI TH·ª®C!</h1>
                </div>
                <div class="wisdom-quote">
                    <div class="quote-icon">üí°</div>
                    <p class="quote-text" id="wisdom-quote-text">"Tri th·ª©c l√† kho b√°u v√¥ t·∫≠n, m·ªói c√¢u h·ªèi l√† m·ªôt ch√¨a kh√≥a m·ªü ra c√°nh c·ª≠a hi·ªÉu bi·∫øt m·ªõi."</p>
                    <p class="quote-author">- Tr√≠ Tu·ªá C·ªï Nh√¢n</p>
                </div>
                <div class="victory-stats">
                    <div class="victory-stat-card">
                        <div class="stat-icon-large">‚≠ê</div>
                        <div class="stat-info">
                            <div class="stat-label">ƒêi·ªÉm S·ªë</div>
                            <div class="stat-number" id="victory-score">0</div>
                        </div>
                    </div>
                    <div class="victory-stat-card">
                        <div class="stat-icon-large">‚úì</div>
                        <div class="stat-info">
                            <div class="stat-label">C√¢u ƒê√∫ng</div>
                            <div class="stat-number" id="victory-correct">0/17</div>
                        </div>
                    </div>
                    <div class="victory-stat-card">
                        <div class="stat-icon-large">üìñ</div>
                        <div class="stat-info">
                            <div class="stat-label">Ki·∫øn Th·ª©c</div>
                            <div class="stat-number" id="knowledge-level">Novice</div>
                        </div>
                    </div>
                    <div class="victory-stat-card">
                        <div class="stat-icon-large">üèÜ</div>
                        <div class="stat-info">
                            <div class="stat-label">Danh Hi·ªáu</div>
                            <div class="stat-number" id="victory-rank">H·ªçc Tr√≤</div>
                        </div>
                    </div>
                </div>
                <div class="knowledge-message">
                    <p id="knowledge-message-text">B·∫°n ƒë√£ ho√†n th√†nh h√†nh tr√¨nh t√¨m hi·ªÉu v·ªÅ ch·ªß nghƒ©a M√°c ‚Äì L√™nin. Tri th·ª©c b·∫°n thu th·∫≠p ƒë∆∞·ª£c s·∫Ω l√† n·ªÅn t·∫£ng v·ªØng ch·∫Øc cho nh·ªØng hi·ªÉu bi·∫øt s√¢u s·∫Øc h∆°n!</p>
                </div>
                <div class="victory-actions">
                    <button id="play-again-btn" class="btn btn-hero">H·ªçc L·∫°i</button>
                    <button id="main-menu-btn" class="btn btn-secondary">Menu Ch√≠nh</button>
                </div>
                </div>
                </div>
            </div>

    <!-- Game Over Screen -->
    <div id="gameover-screen" class="screen">
        <div class="gameover-container">
            <div class="gameover-content">
                <img src="/assets/images/end-game.gif" alt="Game Over GIF" class="gameover-gif" />
                <div class="gameover-icon">üíÄ</div>
                <h1 class="gameover-title">TH·∫§T B·∫†I</h1>
                <p class="gameover-text">B·∫°n ƒë√£ h·∫øt th·ªùi gian ho·∫∑c ƒëi·ªÉm s·ªë qu√° th·∫•p!</p>
                <div class="gameover-stats" id="gameover-stats"></div>
                <div class="gameover-actions">
                    <button id="retry-btn" class="btn btn-hero">Th·ª≠ L·∫°i</button>
                    <button id="gameover-menu-btn" class="btn btn-secondary">Menu Ch√≠nh</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Contribution Modal -->
    <div id="contribution-modal" class="screen">
        <div class="contribution-container">
            <div class="contribution-content">
                <div class="contribution-header">
                    <h2>üìù ƒê√≥ng G√≥p C√¢u H·ªèi</h2>
                    <button id="close-contribution-modal" class="btn-close-modal">&times;</button>
                </div>
                <div class="contribution-info">
                    <p>B·∫°n c√≥ th·ªÉ ƒë√≥ng g√≥p c√¢u h·ªèi m·ªõi cho game. C√¢u h·ªèi c·ªßa b·∫°n s·∫Ω ƒë∆∞·ª£c admin xem x√©t v√† duy·ªát.</p>
                </div>
                <div id="contribution-forms" class="contribution-forms">
                    <!-- Forms will be added here -->
            </div>
            <div class="contribution-actions">
                    <button id="add-question-btn" class="btn btn-primary">
                        <span class="btn-icon">‚ûï</span>
                        Th√™m C√¢u H·ªèi
                    </button>
                    <button id="submit-contributions-btn" class="btn btn-success">
                        <span class="btn-icon">üì§</span>
                        G·ª≠i ƒê√≥ng G√≥p
                    </button>
                    <button id="cancel-contribution-btn" class="btn btn-secondary">
                        <span class="btn-icon">‚ùå</span>
                        H·ªßy
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/rpg-game.js"></script>
    <script src="js/contribution.js"></script>
</body>
</html>